# 哈希函数

- input域 无穷
- output域 有穷
- 输入一样，输出也一样
- 存在哈希碰撞
- 给很多输入，输出的结果均匀分布
- 输入有规律，输出无规律



**构造1000个相互独立的哈希函数：**

假如有两个哈希函数h1，h2，那么可以构造出：

h1+2h2

h1+3h2

....

都是相互独立的





**hash函数**

- md5

- SHA-1



# 布隆过滤器

 ## 应用场景：

黑名单有100亿个url，假设url64个字节

求，给定一个url，判断是否在黑名单里面

解决方案：

（1）

假设用HashSet，大约需要6400亿字节 （640G）内存

（2）假设允许一定的失误率，可以使用布隆过滤器

> 这个失误可以理解为，犯罪嫌疑人一定会被识别出来，但是无罪的人可能会被判为犯人



## 是什么

允许有一定失误率的集合

用一个bit标识该元素是否存在集合中

一个元素过来，分别使用k个hash函数计算值，并把相应比特位置为1 

判断一个元素是否在集合中，使用k个hash函数（必须是相互独立的hash函数）计算hash值，并看对应的bit位是否为1，如果全部k个hash函数的结果都为1，可以认为该元素在集合中，否则不在



**公式**

n 样本量

p 失误率

m bit数组大小

k 哈希函数个数

（1）比特数组大小：

m = -(n*lnp)/(ln2)^2 （单位：bit）

（2）哈希函数的个数

k = ln2 * m/n

（3）预期失误率

(1-e^(-n*k/m))^k





# 一致性Hash

<http://www.zsythink.net/archives/1182/>

